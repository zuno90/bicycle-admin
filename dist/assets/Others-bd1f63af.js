import{R as u,j as a,n as S,E as j,L as k}from"./index-7255fdf2.js";import{C as g,g as y,a as x,b as w,d as C,S as P,c as E,e as f,s as p,P as I}from"./s3.util-c2dd3360.js";class h extends g{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,e,o){this.middlewareStack.use(y(e,this.serialize,this.deserialize)),this.middlewareStack.use(x(e,h.getEndpointParameterInstructions()));const c=t.concat(this.middlewareStack),{logger:l}=e,i={logger:l,clientName:"S3Client",commandName:"DeleteObjectCommand",inputFilterSensitiveLog:s=>s,outputFilterSensitiveLog:s=>s,[P]:{service:"AmazonS3",operation:"DeleteObject"}},{requestHandler:m}=e;return c.resolve(s=>m.handle(s.request,o||{}),i)}serialize(t,e){return w(t,e)}deserialize(t,e){return C(t,e)}}class b extends g{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,e,o){this.middlewareStack.use(y(e,this.serialize,this.deserialize)),this.middlewareStack.use(x(e,b.getEndpointParameterInstructions()));const c=t.concat(this.middlewareStack),{logger:l}=e,i={logger:l,clientName:"S3Client",commandName:"ListObjectsV2Command",inputFilterSensitiveLog:s=>s,outputFilterSensitiveLog:s=>s,[P]:{service:"AmazonS3",operation:"ListObjectsV2"}},{requestHandler:m}=e;return c.resolve(s=>m.handle(s.request,o||{}),i)}serialize(t,e){return E(t,e)}deserialize(t,e){return f(t,e)}}const N=/image\/(png|jpg|jpeg|webp)/i,v=()=>{const[d,t]=u.useState("");u.useEffect(()=>{o()},[]);const e=async n=>{if(n.target.files){if(!n.target.files[0].type.match(N))return S(j.error,"Chỉ cho phép up ảnh định dạng .png, .jpg, .jpeg, .webp!","error");await c(),await l(n.target.files[0])}},o=async()=>{try{const n=new b({Bucket:"bicycle-vuong-phat",Prefix:"banner"}),r=await p.send(n);if(!r||!r.Contents)throw Error("Can not find image object!");const i=r.Contents[1].Key;t(i)}catch(n){console.error(n)}},c=async()=>{try{const n=new h({Bucket:"bicycle-vuong-phat",Key:d});await p.send(n)}catch(n){console.error(n)}},l=async n=>{try{const r="banner/"+new Date().getTime()+n.name,i=new I({Bucket:"bicycle-vuong-phat",Key:r,Body:n});if((await p.send(i)).$metadata.httpStatusCode!==200)throw new Error("Upload ảnh không thành công, vui lòng thử lại!");t(r)}catch(r){console.error(r)}};return a.jsxs("div",{className:"space-y-10 mb-6",children:[a.jsx("div",{className:"w-full inline-flex items-center justify-between",children:a.jsx("h4",{className:"text-xl font-semibold text-black dark:text-white",children:"BANNER"})}),a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[a.jsxs("label",{htmlFor:"upload-banner",children:[a.jsx("img",{src:d&&`https://d2uw95hyyeoa8w.cloudfront.net/${d}`,className:"w-full cursor-pointer",alt:"app-banner"}),a.jsx("input",{type:"file",onChange:e,id:"upload-banner",className:"sr-only"})]}),a.jsx("p",{className:"text-xs sm:text-xl text-meta-1 italic",children:"* Click vào ảnh để upload banner cho app"})]})]})},O=()=>a.jsx("section",{className:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1",children:a.jsx(u.Suspense,{fallback:a.jsx(k,{}),children:a.jsx(v,{})})});export{O as default};
