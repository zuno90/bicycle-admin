import{c as K}from"./base-e6441cfb.js";import{i as Sn,g as ke,I as g,R as kn,j as jn,W as xn,X as Fn}from"./index-47085293.js";import{P as m,p as a}from"./index-ee9c0025.js";const $r=async()=>{const e=await Sn(`${K.endpoint}/sizes`,{Authorization:`Bearer ${ke(K.cache.accessToken)}`});if(e.success)return e.data.sizes};function $(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function u(v){try{s(r.next(v))}catch(p){c(p)}}function f(v){try{s(r.throw(v))}catch(p){c(p)}}function s(v){v.done?o(v.value):i(v.value).then(u,f)}s((r=r.apply(e,n||[])).next())})}function H(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(s){return function(v){return f([s,v])}}function f(s){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,s[0]&&(t=0)),t;)try{if(r=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,i=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){t.label=s[1];break}if(s[0]===6&&t.label<o[1]){t.label=o[1],o=s;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(s);break}o[2]&&t.ops.pop(),t.trys.pop();continue}s=n.call(e,t)}catch(v){s=[6,v],i=0}finally{r=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function Ue(e,n){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var r=t.call(e),i,o=[],c;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){c={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(c)throw c.error}}return o}function We(e,n,t){if(t||arguments.length===2)for(var r=0,i=n.length,o;r<i;r++)(o||!(r in n))&&(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return e.concat(o||Array.prototype.slice.call(n))}var Tn=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function G(e,n){var t=In(e);if(typeof t.path!="string"){var r=e.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof n=="string"?n:typeof r=="string"&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return t}function In(e){var n=e.name,t=n&&n.lastIndexOf(".")!==-1;if(t&&!e.type){var r=n.split(".").pop().toLowerCase(),i=Tn.get(r);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}var Pn=[".DS_Store","Thumbs.db"];function Ln(e){return $(this,void 0,void 0,function(){return H(this,function(n){return re(e)&&Rn(e.dataTransfer)?[2,Kn(e.dataTransfer,e.type)]:Mn(e)?[2,zn(e)]:Array.isArray(e)&&e.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Bn(e)]:[2,[]]})})}function Rn(e){return re(e)}function Mn(e){return re(e)&&re(e.target)}function re(e){return typeof e=="object"&&e!==null}function zn(e){return De(e.target.files).map(function(n){return G(n)})}function Bn(e){return $(this,void 0,void 0,function(){var n;return H(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(r){return r.getFile()}))];case 1:return n=t.sent(),[2,n.map(function(r){return G(r)})]}})})}function Kn(e,n){return $(this,void 0,void 0,function(){var t,r;return H(this,function(i){switch(i.label){case 0:return e.items?(t=De(e.items).filter(function(o){return o.kind==="file"}),n!=="drop"?[2,t]:[4,Promise.all(t.map($n))]):[3,2];case 1:return r=i.sent(),[2,Ve(sn(r))];case 2:return[2,Ve(De(e.files).map(function(o){return G(o)}))]}})})}function Ve(e){return e.filter(function(n){return Pn.indexOf(n.name)===-1})}function De(e){if(e===null)return[];for(var n=[],t=0;t<e.length;t++){var r=e[t];n.push(r)}return n}function $n(e){if(typeof e.webkitGetAsEntry!="function")return Ge(e);var n=e.webkitGetAsEntry();return n&&n.isDirectory?ln(n):Ge(e)}function sn(e){return e.reduce(function(n,t){return We(We([],Ue(n),!1),Ue(Array.isArray(t)?sn(t):[t]),!1)},[])}function Ge(e){var n=e.getAsFile();if(!n)return Promise.reject("".concat(e," is not a File"));var t=G(n);return Promise.resolve(t)}function Hn(e){return $(this,void 0,void 0,function(){return H(this,function(n){return[2,e.isDirectory?ln(e):Nn(e)]})})}function ln(e){var n=e.createReader();return new Promise(function(t,r){var i=[];function o(){var c=this;n.readEntries(function(u){return $(c,void 0,void 0,function(){var f,s,v;return H(this,function(p){switch(p.label){case 0:if(u.length)return[3,5];p.label=1;case 1:return p.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return f=p.sent(),t(f),[3,4];case 3:return s=p.sent(),r(s),[3,4];case 4:return[3,6];case 5:v=Promise.all(u.map(Hn)),i.push(v),o(),p.label=6;case 6:return[2]}})})},function(u){r(u)})}o()})}function Nn(e){return $(this,void 0,void 0,function(){return H(this,function(n){return[2,new Promise(function(t,r){e.file(function(i){var o=G(i,e.fullPath);t(o)},function(i){r(i)})})]})})}var Un=function(e,n){if(e&&n){var t=Array.isArray(n)?n:n.split(","),r=e.name||"",i=(e.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return t.some(function(c){var u=c.trim().toLowerCase();return u.charAt(0)==="."?r.toLowerCase().endsWith(u):u.endsWith("/*")?o===u.replace(/\/.*$/,""):i===u})}return!0};function Ye(e){return Gn(e)||Vn(e)||pn(e)||Wn()}function Wn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gn(e){if(Array.isArray(e))return we(e)}function qe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function Je(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?qe(Object(t),!0).forEach(function(r){fn(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qe(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function fn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function V(e,n){return Jn(e)||qn(e,n)||pn(e,n)||Yn()}function Yn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pn(e,n){if(e){if(typeof e=="string")return we(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return we(e,n)}}function we(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function qn(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var r=[],i=!0,o=!1,c,u;try{for(t=t.call(e);!(i=(c=t.next()).done)&&(r.push(c.value),!(n&&r.length===n));i=!0);}catch(f){o=!0,u=f}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw u}}return r}}function Jn(e){if(Array.isArray(e))return e}var Xn="file-invalid-type",Qn="file-too-large",Zn="file-too-small",er="too-many-files",nr=function(n){n=Array.isArray(n)&&n.length===1?n[0]:n;var t=Array.isArray(n)?"one of ".concat(n.join(", ")):n;return{code:Xn,message:"File type must be ".concat(t)}},Xe=function(n){return{code:Qn,message:"File is larger than ".concat(n," ").concat(n===1?"byte":"bytes")}},Qe=function(n){return{code:Zn,message:"File is smaller than ".concat(n," ").concat(n===1?"byte":"bytes")}},rr={code:er,message:"Too many files"};function dn(e,n){var t=e.type==="application/x-moz-file"||Un(e,n);return[t,t?null:nr(n)]}function vn(e,n,t){if(P(e.size))if(P(n)&&P(t)){if(e.size>t)return[!1,Xe(t)];if(e.size<n)return[!1,Qe(n)]}else{if(P(n)&&e.size<n)return[!1,Qe(n)];if(P(t)&&e.size>t)return[!1,Xe(t)]}return[!0,null]}function P(e){return e!=null}function tr(e){var n=e.files,t=e.accept,r=e.minSize,i=e.maxSize,o=e.multiple,c=e.maxFiles,u=e.validator;return!o&&n.length>1||o&&c>=1&&n.length>c?!1:n.every(function(f){var s=dn(f,t),v=V(s,1),p=v[0],h=vn(f,r,i),E=V(h,1),y=E[0],C=u?u(f):null;return p&&y&&!C})}function te(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function ne(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(n){return n==="Files"||n==="application/x-moz-file"}):!!e.target&&!!e.target.files}function Ze(e){e.preventDefault()}function or(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function ir(e){return e.indexOf("Edge/")!==-1}function ar(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return or(e)||ir(e)}function j(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),c=1;c<i;c++)o[c-1]=arguments[c];return n.some(function(u){return!te(r)&&u&&u.apply(void 0,[r].concat(o)),te(r)})}}function ur(){return"showOpenFilePicker"in window}function cr(e){if(P(e)){var n=Object.entries(e).filter(function(t){var r=V(t,2),i=r[0],o=r[1],c=!0;return gn(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),c=!1),(!Array.isArray(o)||!o.every(hn))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),c=!1),c}).reduce(function(t,r){var i=V(r,2),o=i[0],c=i[1];return Je(Je({},t),{},fn({},o,c))},{});return[{description:"Files",accept:n}]}return e}function sr(e){if(P(e))return Object.entries(e).reduce(function(n,t){var r=V(t,2),i=r[0],o=r[1];return[].concat(Ye(n),[i],Ye(o))},[]).filter(function(n){return gn(n)||hn(n)}).join(",")}function lr(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function fr(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function gn(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function hn(e){return/^.*\.[\w]+$/.test(e)}var pr=["children"],dr=["open"],vr=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],gr=["refKey","onChange","onClick"];function hr(e){return br(e)||yr(e)||mn(e)||mr()}function mr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yr(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function br(e){if(Array.isArray(e))return Ce(e)}function ye(e,n){return wr(e)||Dr(e,n)||mn(e,n)||Er()}function Er(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mn(e,n){if(e){if(typeof e=="string")return Ce(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ce(e,n)}}function Ce(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Dr(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var r=[],i=!0,o=!1,c,u;try{for(t=t.call(e);!(i=(c=t.next()).done)&&(r.push(c.value),!(n&&r.length===n));i=!0);}catch(f){o=!0,u=f}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw u}}return r}}function wr(e){if(Array.isArray(e))return e}function en(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?en(Object(t),!0).forEach(function(r){_e(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):en(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _e(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function oe(e,n){if(e==null)return{};var t=Cr(e,n),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}function Cr(e,n){if(e==null)return{};var t={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(n.indexOf(i)>=0)&&(t[i]=e[i]);return t}var je=g.forwardRef(function(e,n){var t=e.children,r=oe(e,pr),i=_r(r),o=i.open,c=oe(i,dr);return g.useImperativeHandle(n,function(){return{open:o}},[o]),kn.createElement(g.Fragment,null,t(b(b({},c),{},{open:o})))});je.displayName="Dropzone";var yn={disabled:!1,getFilesFromEvent:Ln,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};je.defaultProps=yn;je.propTypes={children:m.func,accept:m.objectOf(m.arrayOf(m.string)),multiple:m.bool,preventDropOnDocument:m.bool,noClick:m.bool,noKeyboard:m.bool,noDrag:m.bool,noDragEventsBubbling:m.bool,minSize:m.number,maxSize:m.number,maxFiles:m.number,disabled:m.bool,getFilesFromEvent:m.func,onFileDialogCancel:m.func,onFileDialogOpen:m.func,useFsAccessApi:m.bool,autoFocus:m.bool,onDragEnter:m.func,onDragLeave:m.func,onDragOver:m.func,onDrop:m.func,onDropAccepted:m.func,onDropRejected:m.func,onError:m.func,validator:m.func};var Oe={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function _r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=b(b({},yn),e),t=n.accept,r=n.disabled,i=n.getFilesFromEvent,o=n.maxSize,c=n.minSize,u=n.multiple,f=n.maxFiles,s=n.onDragEnter,v=n.onDragLeave,p=n.onDragOver,h=n.onDrop,E=n.onDropAccepted,y=n.onDropRejected,C=n.onFileDialogCancel,S=n.onFileDialogOpen,x=n.useFsAccessApi,F=n.autoFocus,L=n.preventDropOnDocument,xe=n.noClick,ae=n.noKeyboard,Fe=n.noDrag,T=n.noDragEventsBubbling,ue=n.onError,N=n.validator,U=g.useMemo(function(){return sr(t)},[t]),Te=g.useMemo(function(){return cr(t)},[t]),ce=g.useMemo(function(){return typeof S=="function"?S:nn},[S]),Y=g.useMemo(function(){return typeof C=="function"?C:nn},[C]),_=g.useRef(null),k=g.useRef(null),Dn=g.useReducer(Or,Oe),Ie=ye(Dn,2),se=Ie[0],O=Ie[1],wn=se.isFocused,Pe=se.isFileDialogActive,q=g.useRef(typeof window<"u"&&window.isSecureContext&&x&&ur()),Le=function(){!q.current&&Pe&&setTimeout(function(){if(k.current){var d=k.current.files;d.length||(O({type:"closeDialog"}),Y())}},300)};g.useEffect(function(){return window.addEventListener("focus",Le,!1),function(){window.removeEventListener("focus",Le,!1)}},[k,Pe,Y,q]);var R=g.useRef([]),Re=function(d){_.current&&_.current.contains(d.target)||(d.preventDefault(),R.current=[])};g.useEffect(function(){return L&&(document.addEventListener("dragover",Ze,!1),document.addEventListener("drop",Re,!1)),function(){L&&(document.removeEventListener("dragover",Ze),document.removeEventListener("drop",Re))}},[_,L]),g.useEffect(function(){return!r&&F&&_.current&&_.current.focus(),function(){}},[_,F,r]);var I=g.useCallback(function(l){ue?ue(l):console.error(l)},[ue]),Me=g.useCallback(function(l){l.preventDefault(),l.persist(),Z(l),R.current=[].concat(hr(R.current),[l.target]),ne(l)&&Promise.resolve(i(l)).then(function(d){if(!(te(l)&&!T)){var D=d.length,w=D>0&&tr({files:d,accept:U,minSize:c,maxSize:o,multiple:u,maxFiles:f,validator:N}),A=D>0&&!w;O({isDragAccept:w,isDragReject:A,isDragActive:!0,type:"setDraggedFiles"}),s&&s(l)}}).catch(function(d){return I(d)})},[i,s,I,T,U,c,o,u,f,N]),ze=g.useCallback(function(l){l.preventDefault(),l.persist(),Z(l);var d=ne(l);if(d&&l.dataTransfer)try{l.dataTransfer.dropEffect="copy"}catch{}return d&&p&&p(l),!1},[p,T]),Be=g.useCallback(function(l){l.preventDefault(),l.persist(),Z(l);var d=R.current.filter(function(w){return _.current&&_.current.contains(w)}),D=d.indexOf(l.target);D!==-1&&d.splice(D,1),R.current=d,!(d.length>0)&&(O({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),ne(l)&&v&&v(l))},[_,v,T]),J=g.useCallback(function(l,d){var D=[],w=[];l.forEach(function(A){var W=dn(A,U),B=ye(W,2),fe=B[0],pe=B[1],de=vn(A,c,o),ee=ye(de,2),ve=ee[0],ge=ee[1],he=N?N(A):null;if(fe&&ve&&!he)D.push(A);else{var me=[pe,ge];he&&(me=me.concat(he)),w.push({file:A,errors:me.filter(function(An){return An})})}}),(!u&&D.length>1||u&&f>=1&&D.length>f)&&(D.forEach(function(A){w.push({file:A,errors:[rr]})}),D.splice(0)),O({acceptedFiles:D,fileRejections:w,type:"setFiles"}),h&&h(D,w,d),w.length>0&&y&&y(w,d),D.length>0&&E&&E(D,d)},[O,u,U,c,o,f,h,E,y,N]),X=g.useCallback(function(l){l.preventDefault(),l.persist(),Z(l),R.current=[],ne(l)&&Promise.resolve(i(l)).then(function(d){te(l)&&!T||J(d,l)}).catch(function(d){return I(d)}),O({type:"reset"})},[i,J,I,T]),M=g.useCallback(function(){if(q.current){O({type:"openDialog"}),ce();var l={multiple:u,types:Te};window.showOpenFilePicker(l).then(function(d){return i(d)}).then(function(d){J(d,null),O({type:"closeDialog"})}).catch(function(d){lr(d)?(Y(d),O({type:"closeDialog"})):fr(d)?(q.current=!1,k.current?(k.current.value=null,k.current.click()):I(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):I(d)});return}k.current&&(O({type:"openDialog"}),ce(),k.current.value=null,k.current.click())},[O,ce,Y,x,J,I,Te,u]),Ke=g.useCallback(function(l){!_.current||!_.current.isEqualNode(l.target)||(l.key===" "||l.key==="Enter"||l.keyCode===32||l.keyCode===13)&&(l.preventDefault(),M())},[_,M]),$e=g.useCallback(function(){O({type:"focus"})},[]),He=g.useCallback(function(){O({type:"blur"})},[]),Ne=g.useCallback(function(){xe||(ar()?setTimeout(M,0):M())},[xe,M]),z=function(d){return r?null:d},le=function(d){return ae?null:z(d)},Q=function(d){return Fe?null:z(d)},Z=function(d){T&&d.stopPropagation()},Cn=g.useMemo(function(){return function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=l.refKey,D=d===void 0?"ref":d,w=l.role,A=l.onKeyDown,W=l.onFocus,B=l.onBlur,fe=l.onClick,pe=l.onDragEnter,de=l.onDragOver,ee=l.onDragLeave,ve=l.onDrop,ge=oe(l,vr);return b(b(_e({onKeyDown:le(j(A,Ke)),onFocus:le(j(W,$e)),onBlur:le(j(B,He)),onClick:z(j(fe,Ne)),onDragEnter:Q(j(pe,Me)),onDragOver:Q(j(de,ze)),onDragLeave:Q(j(ee,Be)),onDrop:Q(j(ve,X)),role:typeof w=="string"&&w!==""?w:"presentation"},D,_),!r&&!ae?{tabIndex:0}:{}),ge)}},[_,Ke,$e,He,Ne,Me,ze,Be,X,ae,Fe,r]),_n=g.useCallback(function(l){l.stopPropagation()},[]),On=g.useMemo(function(){return function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=l.refKey,D=d===void 0?"ref":d,w=l.onChange,A=l.onClick,W=oe(l,gr),B=_e({accept:U,multiple:u,type:"file",style:{display:"none"},onChange:z(j(w,X)),onClick:z(j(A,_n)),tabIndex:-1},D,k);return b(b({},B),W)}},[k,t,u,X,r]);return b(b({},se),{},{isFocused:wn&&!r,getRootProps:Cn,getInputProps:On,rootRef:_,inputRef:k,open:z(M)})}function Or(e,n){switch(n.type){case"focus":return b(b({},e),{},{isFocused:!0});case"blur":return b(b({},e),{},{isFocused:!1});case"openDialog":return b(b({},Oe),{},{isFileDialogActive:!0});case"closeDialog":return b(b({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return b(b({},e),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return b(b({},e),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections});case"reset":return b({},Oe);default:return e}}function nn(){}var Ae=globalThis&&globalThis.__assign||function(){return Ae=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ae.apply(this,arguments)},bn={onActivate:a.func,onAddUndo:a.func,onBeforeAddUndo:a.func,onBeforeExecCommand:a.func,onBeforeGetContent:a.func,onBeforeRenderUI:a.func,onBeforeSetContent:a.func,onBeforePaste:a.func,onBlur:a.func,onChange:a.func,onClearUndos:a.func,onClick:a.func,onContextMenu:a.func,onCommentChange:a.func,onCopy:a.func,onCut:a.func,onDblclick:a.func,onDeactivate:a.func,onDirty:a.func,onDrag:a.func,onDragDrop:a.func,onDragEnd:a.func,onDragGesture:a.func,onDragOver:a.func,onDrop:a.func,onExecCommand:a.func,onFocus:a.func,onFocusIn:a.func,onFocusOut:a.func,onGetContent:a.func,onHide:a.func,onInit:a.func,onKeyDown:a.func,onKeyPress:a.func,onKeyUp:a.func,onLoadContent:a.func,onMouseDown:a.func,onMouseEnter:a.func,onMouseLeave:a.func,onMouseMove:a.func,onMouseOut:a.func,onMouseOver:a.func,onMouseUp:a.func,onNodeChange:a.func,onObjectResizeStart:a.func,onObjectResized:a.func,onObjectSelected:a.func,onPaste:a.func,onPostProcess:a.func,onPostRender:a.func,onPreProcess:a.func,onProgressState:a.func,onRedo:a.func,onRemove:a.func,onReset:a.func,onSaveContent:a.func,onSelectionChange:a.func,onSetAttrib:a.func,onSetContent:a.func,onShow:a.func,onSubmit:a.func,onUndo:a.func,onVisualAid:a.func,onSkinLoadError:a.func,onThemeLoadError:a.func,onModelLoadError:a.func,onPluginLoadError:a.func,onIconsLoadError:a.func,onLanguageLoadError:a.func,onScriptsLoad:a.func,onScriptsLoadError:a.func},Ar=Ae({apiKey:a.string,id:a.string,inline:a.bool,init:a.object,initialValue:a.string,onEditorChange:a.func,value:a.string,tagName:a.string,cloudChannel:a.string,plugins:a.oneOfType([a.string,a.array]),toolbar:a.oneOfType([a.string,a.array]),disabled:a.bool,textareaName:a.string,tinymceScriptSrc:a.oneOfType([a.string,a.arrayOf(a.string),a.arrayOf(a.shape({src:a.string,async:a.bool,defer:a.bool}))]),rollback:a.oneOfType([a.number,a.oneOf([!1])]),scriptLoading:a.shape({async:a.bool,defer:a.bool,delay:a.number})},bn),be=function(e){return typeof e=="function"},rn=function(e){return e in bn},tn=function(e){return e.substr(2)},Sr=function(e,n,t,r,i,o,c){var u=Object.keys(i).filter(rn),f=Object.keys(o).filter(rn),s=u.filter(function(p){return o[p]===void 0}),v=f.filter(function(p){return i[p]===void 0});s.forEach(function(p){var h=tn(p),E=c[h];t(h,E),delete c[h]}),v.forEach(function(p){var h=r(e,p),E=tn(p);c[E]=h,n(E,h)})},kr=function(e,n,t,r,i){return Sr(i,e.on.bind(e),e.off.bind(e),function(o,c){return function(u){var f;return(f=o(c))===null||f===void 0?void 0:f(u,e)}},n,t,r)},on=0,En=function(e){var n=Date.now(),t=Math.floor(Math.random()*1e9);return on++,e+"_"+t+on+String(n)},an=function(e){return e!==null&&(e.tagName.toLowerCase()==="textarea"||e.tagName.toLowerCase()==="input")},un=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},jr=function(e,n){return un(e).concat(un(n))},xr=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},Fr=function(e){if(!("isConnected"in Node.prototype)){for(var n=e,t=e.parentNode;t!=null;)n=t,t=n.parentNode;return n===e.ownerDocument}return e.isConnected},cn=function(e,n){e!==void 0&&(e.mode!=null&&typeof e.mode=="object"&&typeof e.mode.set=="function"?e.mode.set(n):e.setMode(n))},Se=globalThis&&globalThis.__assign||function(){return Se=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Se.apply(this,arguments)},Tr=function(e,n,t){var r,i,o=e.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.id=n.id,o.src=n.src,o.async=(r=n.async)!==null&&r!==void 0?r:!1,o.defer=(i=n.defer)!==null&&i!==void 0?i:!1;var c=function(){o.removeEventListener("load",c),o.removeEventListener("error",u),t(n.src)},u=function(f){o.removeEventListener("load",c),o.removeEventListener("error",u),t(n.src,f)};o.addEventListener("load",c),o.addEventListener("error",u),e.head&&e.head.appendChild(o)},Ir=function(e){var n={},t=function(c,u){var f=n[c];f.done=!0,f.error=u;for(var s=0,v=f.handlers;s<v.length;s++){var p=v[s];p(c,u)}f.handlers=[]},r=function(c,u,f){var s=function(F){return f!==void 0?f(F):console.error(F)};if(c.length===0){s(new Error("At least one script must be provided"));return}for(var v=0,p=!1,h=function(F,L){p||(L?(p=!0,s(L)):++v===c.length&&u())},E=0,y=c;E<y.length;E++){var C=y[E],S=n[C.src];if(S)S.done?h(C.src,S.error):S.handlers.push(h);else{var x=En("tiny-");n[C.src]={id:x,src:C.src,done:!1,error:null,handlers:[h]},Tr(e,Se({id:x},C),t)}}},i=function(){for(var c,u=0,f=Object.values(n);u<f.length;u++){var s=f[u],v=e.getElementById(s.id);v!=null&&v.tagName==="SCRIPT"&&((c=v.parentNode)===null||c===void 0||c.removeChild(v))}n={}},o=function(){return e};return{loadScripts:r,deleteScripts:i,getDocument:o}},Pr=function(){var e=[],n=function(i){var o=e.find(function(c){return c.getDocument()===i});return o===void 0&&(o=Ir(i),e.push(o)),o},t=function(i,o,c,u,f){var s=function(){return n(i).loadScripts(o,u,f)};c>0?setTimeout(s,c):s()},r=function(){for(var i=e.pop();i!=null;i=e.pop())i.deleteScripts()};return{loadList:t,reinitialize:r}},Lr=Pr(),Ee=function(e){var n=e;return n&&n.tinymce?n.tinymce:null},Rr=globalThis&&globalThis.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ie=globalThis&&globalThis.__assign||function(){return ie=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ie.apply(this,arguments)},Mr=function(e){Rr(n,e);function n(t){var r=this,i,o,c;return r=e.call(this,t)||this,r.rollbackTimer=void 0,r.valueCursor=void 0,r.rollbackChange=function(){var u=r.editor,f=r.props.value;u&&f&&f!==r.currentContent&&u.undoManager.ignore(function(){if(u.setContent(f),r.valueCursor&&(!r.inline||u.hasFocus()))try{u.selection.moveToBookmark(r.valueCursor)}catch{}}),r.rollbackTimer=void 0},r.handleBeforeInput=function(u){if(r.props.value!==void 0&&r.props.value===r.currentContent&&r.editor&&(!r.inline||r.editor.hasFocus()))try{r.valueCursor=r.editor.selection.getBookmark(3)}catch{}},r.handleBeforeInputSpecial=function(u){(u.key==="Enter"||u.key==="Backspace"||u.key==="Delete")&&r.handleBeforeInput(u)},r.handleEditorChange=function(u){var f=r.editor;if(f&&f.initialized){var s=f.getContent();r.props.value!==void 0&&r.props.value!==s&&r.props.rollback!==!1&&(r.rollbackTimer||(r.rollbackTimer=window.setTimeout(r.rollbackChange,typeof r.props.rollback=="number"?r.props.rollback:200))),s!==r.currentContent&&(r.currentContent=s,be(r.props.onEditorChange)&&r.props.onEditorChange(s,f))}},r.handleEditorChangeSpecial=function(u){(u.key==="Backspace"||u.key==="Delete")&&r.handleEditorChange(u)},r.initialise=function(u){var f,s,v;u===void 0&&(u=0);var p=r.elementRef.current;if(p){if(!Fr(p)){if(u===0)setTimeout(function(){return r.initialise(1)},1);else if(u<100)setTimeout(function(){return r.initialise(u+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var h=Ee(r.view);if(!h)throw new Error("tinymce should have been loaded into global scope");var E=ie(ie({},r.props.init),{selector:void 0,target:p,readonly:r.props.disabled,inline:r.inline,plugins:jr((f=r.props.init)===null||f===void 0?void 0:f.plugins,r.props.plugins),toolbar:(s=r.props.toolbar)!==null&&s!==void 0?s:(v=r.props.init)===null||v===void 0?void 0:v.toolbar,setup:function(y){r.editor=y,r.bindHandlers({}),r.inline&&!an(p)&&y.once("PostRender",function(C){y.setContent(r.getInitialValue(),{no_events:!0})}),r.props.init&&be(r.props.init.setup)&&r.props.init.setup(y)},init_instance_callback:function(y){var C,S,x=r.getInitialValue();r.currentContent=(C=r.currentContent)!==null&&C!==void 0?C:y.getContent(),r.currentContent!==x&&(r.currentContent=x,y.setContent(x),y.undoManager.clear(),y.undoManager.add(),y.setDirty(!1));var F=(S=r.props.disabled)!==null&&S!==void 0?S:!1;cn(r.editor,F?"readonly":"design"),r.props.init&&be(r.props.init.init_instance_callback)&&r.props.init.init_instance_callback(y)}});r.inline||(p.style.visibility=""),an(p)&&(p.value=r.getInitialValue()),h.init(E)}},r.id=r.props.id||En("tiny-react"),r.elementRef=g.createRef(),r.inline=(c=(i=r.props.inline)!==null&&i!==void 0?i:(o=r.props.init)===null||o===void 0?void 0:o.inline)!==null&&c!==void 0?c:!1,r.boundHandlers={},r}return Object.defineProperty(n.prototype,"view",{get:function(){var t,r;return(r=(t=this.elementRef.current)===null||t===void 0?void 0:t.ownerDocument.defaultView)!==null&&r!==void 0?r:window},enumerable:!1,configurable:!0}),n.prototype.componentDidUpdate=function(t){var r=this,i,o;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(t),this.editor.initialized)){if(this.currentContent=(i=this.currentContent)!==null&&i!==void 0?i:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==t.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var c=this.editor;c.undoManager.transact(function(){var f;if(!r.inline||c.hasFocus())try{f=c.selection.getBookmark(3)}catch{}var s=r.valueCursor;if(c.setContent(r.props.value),!r.inline||c.hasFocus())for(var v=0,p=[f,s];v<p.length;v++){var h=p[v];if(h)try{c.selection.moveToBookmark(h),r.valueCursor=h;break}catch{}}})}if(this.props.disabled!==t.disabled){var u=(o=this.props.disabled)!==null&&o!==void 0?o:!1;cn(this.editor,u?"readonly":"design")}}},n.prototype.componentDidMount=function(){var t=this,r,i,o,c,u;if(Ee(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(i=(r=this.props).onScriptsLoadError)===null||i===void 0||i.call(r,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((o=this.elementRef.current)===null||o===void 0)&&o.ownerDocument){var f=function(){var v,p;(p=(v=t.props).onScriptsLoad)===null||p===void 0||p.call(v),t.initialise()},s=function(v){var p,h;(h=(p=t.props).onScriptsLoadError)===null||h===void 0||h.call(p,v)};Lr.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(u=(c=this.props.scriptLoading)===null||c===void 0?void 0:c.delay)!==null&&u!==void 0?u:0,f,s)}},n.prototype.componentWillUnmount=function(){var t=this,r=this.editor;r&&(r.off(this.changeEvents(),this.handleEditorChange),r.off(this.beforeInputEvent(),this.handleBeforeInput),r.off("keypress",this.handleEditorChangeSpecial),r.off("keydown",this.handleBeforeInputSpecial),r.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(i){r.off(i,t.boundHandlers[i])}),this.boundHandlers={},r.remove(),this.editor=void 0)},n.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},n.prototype.changeEvents=function(){var t,r,i,o=(i=(r=(t=Ee(this.view))===null||t===void 0?void 0:t.Env)===null||r===void 0?void 0:r.browser)===null||i===void 0?void 0:i.isIE();return o?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},n.prototype.beforeInputEvent=function(){return xr()?"beforeinput SelectionChange":"SelectionChange"},n.prototype.renderInline=function(){var t=this.props.tagName,r=t===void 0?"div":t;return g.createElement(r,{ref:this.elementRef,id:this.id})},n.prototype.renderIframe=function(){return g.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id})},n.prototype.getScriptSources=function(){var t,r,i=(t=this.props.scriptLoading)===null||t===void 0?void 0:t.async,o=(r=this.props.scriptLoading)===null||r===void 0?void 0:r.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:i,defer:o}]:this.props.tinymceScriptSrc.map(function(s){return typeof s=="string"?{src:s,async:i,defer:o}:s});var c=this.props.cloudChannel,u=this.props.apiKey?this.props.apiKey:"no-api-key",f="https://cdn.tiny.cloud/1/".concat(u,"/tinymce/").concat(c,"/tinymce.min.js");return[{src:f,async:i,defer:o}]},n.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},n.prototype.bindHandlers=function(t){var r=this;if(this.editor!==void 0){kr(this.editor,t,this.props,this.boundHandlers,function(u){return r.props[u]});var i=function(u){return u.onEditorChange!==void 0||u.value!==void 0},o=i(t),c=i(this.props);!o&&c?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):o&&!c&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},n.propTypes=Ar,n.defaultProps={cloudChannel:"6"},n}(g.Component);const Hr=({initContent:e,getContent:n})=>jn.jsx(Mr,{apiKey:"df4xfwysyt7xdzreywi9m58z5jpaj5ke6cwff4zgobsp54ru",init:{placeholder:"Nhập mô tả sản phẩm",height:600,plugins:"anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount",toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat",images_file_types:"jpg,jpeg,png,webp",file_picker_types:"image",file_picker_callback:(t,r,i)=>{const o=document.createElement("input");o.setAttribute("type","file"),o.setAttribute("accept","image/*"),o.addEventListener("change",c=>{var s;const u=(s=c.target)==null?void 0:s.files[0],f=new FileReader;f.addEventListener("load",()=>{var y;const v="blobid"+new Date().getTime(),p=tinymce.activeEditor.editorUpload.blobCache,h=(y=f.result)==null?void 0:y.split(",")[1],E=p.create(v,u,h);p.add(E),t(E.blobUri(),{title:u.name})}),f.readAsDataURL(u)}),o.click()}},initialValue:e??"",onEditorChange:(t,r)=>n(t)}),Nr=async e=>await xn(`${K.endpoint}/product`,e,{Authorization:`Bearer ${ke(K.cache.accessToken)}`}),Ur=async e=>await Fn(`${K.endpoint}/product/${e.id}`,e.payload,{Authorization:`Bearer ${ke(K.cache.accessToken)}`});export{Hr as T,Ur as a,Nr as c,$r as g,_r as u};
