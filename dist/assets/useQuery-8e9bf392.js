import{d as y,z as a,C as c,aa as d}from"./index-0cceadaa.js";import{u as p}from"./utils-ef78bda0.js";import{u as C,a as R,e as b,b as g,c as E,s as m,f as S,g as h,Q}from"./suspense-bcf61c7e.js";function O(o,i){const u=y({context:o.context}),s=C(),n=R(),e=u.defaultQueryOptions(o);e._optimisticResults=s?"isRestoring":"optimistic",e.onError&&(e.onError=a.batchCalls(e.onError)),e.onSuccess&&(e.onSuccess=a.batchCalls(e.onSuccess)),e.onSettled&&(e.onSettled=a.batchCalls(e.onSettled)),b(e),g(e,n),E(n);const[r]=c.useState(()=>new i(u,e)),t=r.getOptimisticResult(e);if(p(c.useCallback(l=>{const f=s?()=>{}:r.subscribe(a.batchCalls(l));return r.updateResult(),f},[r,s]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),c.useEffect(()=>{r.setOptions(e,{listeners:!1})},[e,r]),m(e,t,s))throw S(e,r,n);if(h({result:t,errorResetBoundary:n,useErrorBoundary:e.useErrorBoundary,query:r.getCurrentQuery()}))throw t.error;return e.notifyOnChangeProps?t:r.trackResult(t)}function w(o,i,u){const s=d(o,i,u);return O(s,Q)}export{w as u};
